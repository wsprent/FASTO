//Gets a number by asking nicely. (Commented out for testing purposes)
//Now just reads a number from input.
fun int getNum() =
//  let t = write("Please enter an integer: ") in
  read(int)
//Addition functions for use in 2. order functions.
fun int plus(int a, int b) = a + b

fun int plus3(int x) = x+3

//Builds an array by taking an int n from input and creates the following array,
//[0 + 3, 1 + 3,..,(n-1) + 3]
fun [int] makeRow(int col) =
//  let e = write("Building row ") in
//  let e = write(col) in
//  let e = write("\n") in
  let k = getNum() in
  let a = iota(k) in
  map(plus3, a)
//Sums all elements of an array of integers.
fun int sumRow([int] row) =
  reduce(plus, 0, row)

fun int printNum(int n) = write(n)

fun int printArray([int] a) =
  let e = map(printNum, a) in
  1

fun int main() =
  let n = getNum() in //Get the length of the x array
  let x = iota(n) in //Init x
  let x = map(makeRow, x) in //Build each row in x according to input
  let y = map(sumRow, x) in // y[i] <- x[i][0] + ... + x[i][k] | where k is the last element in row i
  let p = getNum() in
  if (2 < p) then (if (p < n) //There's no && operator so it came to this abomination. Sorry.
                   then printArray(x[p])
                   else printArray(y))
             else printArray(y)